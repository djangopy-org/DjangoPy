<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- COMMON TAGS -->
	<title>How to Implement Categories in Django | DjangoPy</title>
	<!-- Search Engine -->
	<meta property="description" content="In this tutorial, we'll learn how to implement categories and subcategories in our Django project without using any external module.">
	<meta property="image" content="https://djangopy.org/static/images/footer_logo.png">
	<!-- Schema.org for Google -->

	<!-- Open Graph general (Facebook, Pinterest & Google+) -->
	<meta property="og:title" content="How to Implement Categories in Django | DjangoPy">
	<meta property="og:description" content="In this tutorial, we'll learn how to implement categories and subcategories in our Django project without using any external module.">
	<meta property="og:image" content="https://djangopy.org/img/how-to-implement-categories-in-django/cover.jpg">

	<meta property="og:url" content="https://djangopy.org/how-to/how-to-implement-categories-in-django/">
	<meta property="og:site_name" content="DjangoPy">
	<meta property="og:locale" content="en_US">
	<meta property="fb:admins" content="https://www.facebook.com/djangopy.org">
	<meta property="og:type" content="article">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary">
	<meta property="twitter:title" content="How to Implement Categories in Django | DjangoPy">
	<meta property="twitter:description" content="In this tutorial, we'll learn how to implement categories and subcategories in our Django project without using any external module.">
	<meta property="twitter:site" content="@DjangoPy_Admin">
	<meta property="twitter:creator" content="@DjangoPy_Admin">
	<meta property="twitter:image:src" content="https://djangopy.org/img/how-to-implement-categories-in-django/cover.jpg">
	<!-- Twitter - Article -->

	<!-- Open Graph - Article -->
	<meta property="article:section" content="how-to">
	<meta property="article:published_time" content="2017-07-08 17:23:56 +0530">
	<meta properry="article:author" content="https://www.facebook.com/djangopy.org">
	<meta property="article:modified_time" content="2017-07-08 17:23:56 +0530">
	
	<meta property="article:tag" content="Django-breadcrumbs"/>
	
	<meta property="article:tag" content="how-to-implement-categories-in-django"/>
	
	<meta property="article:tag" content="Implement-Categories-in-Django"/>
	
	<meta property="article:tag" content="Modified-Preorder-Tree"/>
	
	<meta property="article:tag" content="Traversal-MPTT"/>
	
	<meta property="article:tag" content="Modified-Preorder-Tree-Traversal-Django"/>
	
	<meta property="article:tag" content="categories-in-django"/>
	
	<meta property="article:tag" content="django-categories"/>
	
	<meta property="article:tag" content="nested"/>
	
	<meta property="article:tag" content="categories"/>
	
	<meta property="article:tag" content="DjangoPy-Foundation"/>
	
	<meta property="article:tag" content="django"/>
	
	<meta property="article:tag" content="sub-categories"/>
	

	<meta property="revisit-after" content="2 days" />
	<meta property="distribution" content="web" />
	<meta property="article:publisher" content="https://www.facebook.com/djangopy.org/"/>
	<meta name="description" content="In this tutorial, we'll learn how to implement categories and subcategories in our Django project without using any external module."/>


	<!--   <link rel="stylesheet" href="/css/main.css"> -->
	<link rel="canonical" href="https://djangopy.org/how-to/how-to-implement-categories-in-django/">
	<link rel="alternate" type="application/rss+xml" title="DjangoPy" href="https://djangopy.org/feed.xml">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<!-- Font Awesome CSS-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel = "stylesheet" href="/css/github.css">

	<!-- Fancybox-->
<link rel="stylesheet" type="text/css" href="/css/fonts/fonts.min.css" />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css">
	<!-- theme stylesheet-->
	<link rel="stylesheet" href="/css/default.css" id="theme-stylesheet">
	<!-- Custom stylesheet - for your changes-->
	<link rel="stylesheet" href="/css/custom.css">
	<!-- Favicon-->
	<link rel="shortcut icon" href="/img/favicon1.ico">
	<!-- Javascript files-->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"> </script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>
	<script src="/js/front.js"></script>
	<script type="text/javascript" src = "/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
	<script src="/js/post.js"></script>

<script type="text/javascript">
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-98271390-1', 'auto');
  ga('send', 'pageview');
</script>

</head>

  <body>
    <header class="header">
  <!-- Main Navbar-->
  <nav class="navbar navbar-expand-lg navbar-toggleable-lg">
    <div class="search-area">
      <div class="search-area-inner d-flex justify-content-center">
        <div class="close-btn"><i class="fa fa-2x fa-times"></i></div>
        <div class="row d-flex justify-content-center" style="margin-top:15%;">
          <div class="col-md-8">
            <form action="#" id = "search_form">
              <div class="form-group">
                <input type="search" name="search" id="search" placeholder="What are you looking for?" autocomplete="off">
                <button type="submit" class="submit"><i class="fa fa-search"></i></button>
              </div>
              <div id = "search_results">
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <!-- Navbar Brand -->
      <div class="navbar-header d-flex align-items-center justify-content-between">
        <!-- Navbar Brand --><a href="/" class="navbar-brand"><img src = "/img/djangopy_logo8.png" id = "logo"></a>
        <!-- Toggle Button-->
        <button type="button" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarcollapse" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span></span><span></span><span></span></button>
      </div>
      <!-- Navbar Menu -->
      <div id="navbarcollapse" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="/" class="nav-link active ">Home</a>
          </li>
          <li class="nav-item"><a href="/about" class="nav-link ">About</a>
          </li>
          <li class="nav-item"><a href="/" class="nav-link ">Posts</a>
          </li>
          <li class="nav-item"><a href="/contact" class="nav-link ">Contact</a>
          </li>
        </ul>
        <div class="navbar-text"><a href="#" class="search-btn" id = "search_button"><i class="fa fa-search"></i></a></div>
      </div>
    </div>
  </nav>
</header>


    <div class="page-content">
      <div class="wrapper">
        <br>
<div class="post">
<div class="container">
  <div class="row justify-content-md-center">
    <div class = "col-md-9">
<img class = "img-fluid" alt="" src="/img/how-to-implement-categories-in-django/cover.jpg" title="" srcset="/assets/resized/480/cover.jpg 480w,/assets/resized/800/cover.jpg 800w,/img/how-to-implement-categories-in-django/cover.jpg 1240w">

	<br><br>
    <h1 class="post-title" style="margin-top:15px;">How to Implement Categories in Django</h1>
    <h6 class = "post-spans">Posted: 08 July 2017 | Post By: Karan Suthar | <span id = "ga-page-view" ga-page-url = /how-to/how-to-implement-categories-in-django/></span> <i class = "fa fa-eye"></i>  | <i class = "fa fa-clock"></i> 9 min read | <a style="text-decoration: none;" href="/how-to/how-to-implement-categories-in-django/.html#disqus_thread" data-disqus-identifier="/how-to/how-to-implement-categories-in-django/"><i class = "fa fa-comment"></i></a>  </h6>
   <br> <hr /><br>

    <div class = "post-content"> <h2 id="introduction">Introduction</h2>
<p>Categories are essential for any website because it is easy for users to access content sorted by categories. Categories may have their subcategories, and subcategories may also have subcategories and so on. So in this post, I’ll explain how to implement nested categories in a Django project. You can create categories with Django Admin Panel and then associate it with content like an article or post, So let’s get started.</p>

<p>Let’s implement categories for blog posts, consider my_posts app in the project, add following models in it</p>

<h4 id="modelspy">Models.py</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'self'</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span> <span class="p">,</span><span class="n">related_name</span><span class="o">=</span><span class="s">'children'</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s">'slug'</span><span class="p">,</span> <span class="s">'parent'</span><span class="p">,)</span>    <span class="c">#enforcing that there can not be two</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s">"categories"</span>       <span class="c">#categories under a parent with same </span>
                                                 <span class="c">#slug </span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                           <span class="c"># __str__ method elaborated later in</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>                  <span class="c"># post.  use __unicode__ in place of</span>
                                                 <span class="c"># __str__ if you are using python 2</span>
        <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>                          

        <span class="k">while</span> <span class="n">k</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">full_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">parent</span>

        <span class="k">return</span> <span class="s">' -&gt; '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">full_path</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span></code></pre></figure>

<p>Next, we’ll use category in Post model as a foreign key.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span>  <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'Category'</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">HTMLField</span><span class="p">(</span><span class="s">'Content'</span><span class="p">)</span>
    <span class="n">draft</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">False</span><span class="p">,)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>


    <span class="k">def</span> <span class="nf">get_cat_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>           <span class="c">#for now ignore this instance method,</span>
        <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
        <span class="n">breadcrumb</span> <span class="o">=</span> <span class="p">[</span><span class="s">"dummy"</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">k</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">breadcrumb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">slug</span><span class="p">)</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">parent</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">breadcrumb</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">breadcrumb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">'/'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">breadcrumb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">breadcrumb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></code></pre></figure>

<p>So with Category being a foreign key in Post model, a category can be associated with post.</p>

<p>Open the terminal and change the current working directory to one that contains manage.py then run following migration commands.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python3 manage.py makemigrations
python3 manage.py migrate</code></pre></figure>

<p>Now we make some Category object from the interactive shell so open Django interactive shell by typing following command in terminal.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python3 manage.py shell</code></pre></figure>

<p>Then in shell, you can create categories as illustrated below</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;&gt;&gt;</span> from my_posts.models import <span class="k">*</span>
<span class="o">&gt;&gt;&gt;</span> fruits <span class="o">=</span> Category.objects.create<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">'fruits'</span>, <span class="nv">slug</span><span class="o">=</span><span class="s1">'fruits'</span><span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> fruits
&lt;Category: fruits&gt;
<span class="o">&gt;&gt;&gt;</span> beverages <span class="o">=</span> Category.objects.create<span class="o">(</span> <span class="nv">name</span><span class="o">=</span><span class="s1">'bevarages'</span>, <span class="nv">slug</span><span class="o">=</span><span class="s1">'beverages'</span> <span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> berry <span class="o">=</span> Category.objects.create<span class="o">(</span> name <span class="o">=</span> <span class="s1">'berry'</span>, slug <span class="o">=</span> <span class="s1">'berry'</span>, parent <span class="o">=</span> fruits <span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> citrus_fruits <span class="o">=</span> Category.objects.create<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">'citrus fruits'</span>, <span class="nv">slug</span><span class="o">=</span><span class="s1">'citrus-fruits'</span>, <span class="nv">parent</span><span class="o">=</span>fruits<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> hot_bev <span class="o">=</span> Category.objects.create<span class="o">(</span> name <span class="o">=</span> <span class="s1">'hot'</span>, slug <span class="o">=</span> <span class="s1">'hot'</span> , parent <span class="o">=</span> beverages <span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> cold_bev <span class="o">=</span> Category.objects.create<span class="o">(</span> name <span class="o">=</span> <span class="s1">'cold'</span>, slug <span class="o">=</span> <span class="s1">'cold'</span>, parent <span class="o">=</span> beverages <span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> Category.objects.all<span class="o">()</span>
&lt;QuerySet <span class="o">[</span>&lt;Category: fruits -&gt; berry&gt;, &lt;Category: bevarages&gt;, &lt;Category: fruits -&gt; citrus fruits&gt;, 
&lt;Category: bevarages -&gt; cold&gt;, &lt;Category: fruits&gt;, &lt;Category: bevarages -&gt; hot&gt;]&gt;
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> Category.objects.get<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">'fruits'</span><span class="o">)</span>
&lt;Category: fruits&gt;
<span class="o">&gt;&gt;&gt;</span> f <span class="o">=</span> Category.objects.get<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">'fruits'</span>, <span class="nv">parent</span><span class="o">=</span>None<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> f
&lt;Category: fruits&gt;

<span class="o">&gt;&gt;&gt;</span> f.children.all<span class="o">()</span>
&lt;QuerySet <span class="o">[</span>&lt;Category: fruits -&gt; berry&gt;, &lt;Category: fruits -&gt; citrus fruits&gt;]&gt;
<span class="o">&gt;&gt;&gt;</span> b <span class="o">=</span>  f.children.get<span class="o">(</span> <span class="nv">name</span><span class="o">=</span><span class="s1">'berry'</span>, <span class="nv">parent</span><span class="o">=</span>f<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> b
&lt;Category: fruits -&gt; berry&gt;

<span class="o">&gt;&gt;&gt;</span> Category.objects.all<span class="o">()</span>.delete<span class="o">()</span>            <span class="c">#to delete all the Category objects</span>
<span class="o">(</span>6, <span class="o">{</span><span class="s1">'my_posts.Category'</span>: 6<span class="o">})</span></code></pre></figure>

<p>Now we’ll add categories with Django Admin Panel, so add following code to admin.py</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">Admin</span><span class="o">.</span><span class="n">py</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Category</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span></code></pre></figure>

<p>then run the server by</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python3 manage.py runserver</code></pre></figure>

<p>Now go to admin panel from your browser, you’ll see category there.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/1.jpg" title="" srcset="/assets/resized/480/1.jpg 480w,/assets/resized/800/1.jpg 800w,/img/how-to-implement-categories-in-django/1.jpg 889w" /></p>

<p>Now we add some main categories, by main categories I mean the categories having a null parent. Go to categories and click “Add Category” and add the category like in the image below.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/2.jpg" title="" srcset="/assets/resized/480/2.jpg 480w,/assets/resized/800/2.jpg 800w,/img/how-to-implement-categories-in-django/2.jpg 889w" /></p>

<p>Now to illustrate the nested categories add one more main category say “python”, now add a category “news” as a subcategory of “python”, you have to select “python” as the parent category of “news”, like in the image below.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/3.jpg" title="" srcset="/assets/resized/480/3.jpg 480w,/assets/resized/800/3.jpg 800w,/img/how-to-implement-categories-in-django/3.jpg 887w" /></p>

<p>Now for sake of well understanding add one more category “2017” having  “news”  as parent category like in the image below.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/4.jpg" title="" srcset="/assets/resized/480/4.jpg 480w,/assets/resized/800/4.jpg 800w,/img/how-to-implement-categories-in-django/4.jpg 880w" /></p>

<p>Now the categories we’ve created are showed as follow.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/5.jpg" title="" srcset="/assets/resized/480/5.jpg 480w,/assets/resized/800/5.jpg 800w,/img/how-to-implement-categories-in-django/5.jpg 879w" /></p>

<p>You may be wondering how ‘– &gt;’ are appended after categories ( which is useful in distinguishing between same-named subcategories of a different parent at any level ), this is since we have defined the <strong>str</strong> method in Category model.</p>

<p>Let’s add a post to illustrate how to associate a category with it, so go to the home in admin panel then go to post and click ‘add post’ button.
<img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/6.jpg" title="" srcset="/assets/resized/480/6.jpg 480w,/assets/resized/800/6.jpg 800w,/img/how-to-implement-categories-in-django/6.jpg 1366w" /></p>

<h4 id="urlspy">Urls.py</h4>
<p>As you can see in the image, we have added the post in python &gt; news &gt; 2017. Next, we have to add URL pattern for the category, so go to urls.py and add the following line in urlpatterns list.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^category/(?P&lt;hierarchy&gt;.+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">show_category</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'category'</span><span class="p">),</span></code></pre></figure>

<h4 id="viewspy">Views.py</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">Now</span> <span class="ow">in</span> <span class="n">views</span><span class="o">.</span><span class="n">py</span> <span class="n">add</span> <span class="n">the</span> <span class="n">following</span> <span class="n">function</span><span class="o">.</span>

<span class="k">def</span> <span class="nf">show_category</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">hierarchy</span><span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="n">category_slug</span> <span class="o">=</span> <span class="n">hierarchy</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
    <span class="n">category_queryset</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">())</span>
    <span class="n">all_slugs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span><span class="o">.</span><span class="n">slug</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">category_queryset</span> <span class="p">]</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">slug</span> <span class="ow">in</span> <span class="n">category_slug</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">slug</span> <span class="ow">in</span> <span class="n">all_slugs</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span><span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Post</span><span class="p">,</span> <span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">)</span>
            <span class="n">breadcrumbs_link</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">get_cat_list</span><span class="p">()</span>
            <span class="n">category_name</span> <span class="o">=</span> <span class="p">[</span><span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'/'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'-'</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">breadcrumbs_link</span><span class="p">]</span>
            <span class="n">breadcrumbs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">breadcrumbs_link</span><span class="p">,</span> <span class="n">category_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"postDetail.html"</span><span class="p">,</span> <span class="p">{</span><span class="s">'instance'</span><span class="p">:</span><span class="n">instance</span><span class="p">,</span><span class="s">'breadcrumbs'</span><span class="p">:</span><span class="n">breadcrumbs</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="s">"categories.html"</span><span class="p">,{</span><span class="s">'post_set'</span><span class="p">:</span><span class="n">parent</span><span class="o">.</span><span class="n">post_set</span><span class="o">.</span><span class="nb">all</span><span class="p">(),</span><span class="s">'sub_categories'</span><span class="p">:</span><span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="nb">all</span><span class="p">()})</span></code></pre></figure>

<p>Note that the last element of the category_slug list in show_category could either be a Post object or a category object,</p>

<p>For example the parameter hierarchy may be ‘/python/news’ or it may be  ‘python/news/2017/instagram-makes-a-move-to-python-3/’  in former case the last element of category_slug would be a category object but in later case it is a Post object,  so in for loop tracing categories with hierarchical relation so if the last element be a Post object then it will be rendered with “postDetail.html” template, otherwise if it be a Category object then it will be rendered with “categories.html” template.</p>

<p>In context dictionary, ‘breadcrumbs’ are there because you may want to have the breadcrumb in your post detail page.</p>

<h5 id="templatescategorieshtml">Templates/categories.html</h5>
<p>Add following code in “categories.html”.</p>

<figure class="highlight"><pre><code class="language-pythonx" data-lang="pythonx">{% extends 'base.html' %}
{% load static  %}
{% block content %}
&lt;br&gt;
{% if sub_categories %}
    &lt;h3&gt;Sub Categories&lt;/h3&gt;
    {% for i in sub_categories %}
        &lt;a href="{{ i.slug }}"&gt; {{ i.name }} &lt;/a&gt;
    {% endfor %}
{% endif %}

&lt;div class="row small-up-1 medium-up-3" &gt;
{% if post_set %}
{% for i in post_set %}
    &lt;div class="columns"&gt;
        &lt;div class=" card-article-hover card"&gt;
          &lt;a href="{{ i.slug }}"&gt;
            &lt;img  src="{{ i.cover_photo.url }}"&gt;
          &lt;/a&gt;
          &lt;div class="card-section"&gt;
            &lt;a href="{{ i.slug }}"&gt;
              &lt;h6 class="article-title"&gt;{{ i.title | truncatechars:30}}&lt;/h6&gt;
            &lt;/a&gt;
          &lt;/div&gt;
          &lt;div class="card-divider flex-container align-middle"&gt;
            &lt;a href="" class="author"&gt;{{ i.user.get_full_name }}&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class="hover-border"&gt;
          &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{% endfor %}
{% endif %}
&lt;/div&gt;
{% endblock %}

 </code></pre></figure>

<p>The CSS framework used is Zurb’s Foundation 6 you may use bootstrap as well.</p>

<p>Next,  add following code snippet inside the postDetail.html template to implement breadcrumbs in post detail page ( you should add it above post’s title ).</p>

<figure class="highlight"><pre><code class="language-pythonx" data-lang="pythonx">&lt;ul class="breadcrumbs"&gt;
  &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
      {% for slug,name in breadcrumbs %}
          &lt;li&gt;&lt;a href="/category/{{ slug }}"&gt;{{ name }}&lt;/a&gt;&lt;/li&gt;
      {% endfor %}
&lt;/ul&gt;

 </code></pre></figure>

<p>So breadcrumbs in post detail page would look like in the image below.</p>

<p><img class="img-fluid" alt="" src="/img/how-to-implement-categories-in-django/7.jpg" title="" srcset="/assets/resized/480/7.jpg 480w,/assets/resized/800/7.jpg 800w,/img/how-to-implement-categories-in-django/7.jpg 951w" /></p>

<p>And our Category pages would look like images below</p>

<p>Note that we have only a subcategory in Python/news and no post so only subcategory there. But in ‘2017’ there is no subcategory and a simple post which showed in the image below.</p>

<p>You may be wondering about the cover_image attribute used in template code and hence reflected in card view of the post in above photo, the cover_photo is a field in Post model and for brevity, I did not include the cover_photo attribute in code. If you have any queries regarding it then comment below.</p>

<h2 id="conclusion">CONCLUSION</h2>

<p>Although this approach is not most efficient because we are making many database queries, but for small websites and blogs this approach is good to go. If you are working on some projects like a news website or e-commerce website which contain many level of nested categories then you may want to find a comparatively efficient way to implement category with Modified Preorder Tree Traversal (MPTT), there is Django package available for it, read a post on how to implement categories with django-mptt here.</p>

<p>If you have any query let me know in the comments below.</p>

<p>Happy coding :)</p>
 </div>

<br><br>
    <ul class="socialIcons">
        <li><a href="https://www.facebook.com/dialog/feed?app_id=184683071273&link=https://djangopy.org/how-to/how-to-implement-categories-in-django/&picture=https://djangopy.orgimg/how-to-implement-categories-in-django/cover.jpg&name=How to Implement Categories in Django&caption=%20&description=In this tutorial, we'll learn how to implement categories and subcategories in our Django project without using any external module.&redirect_uri=http%3A%2F%2Fwww.facebook.com%2F" class="Icon socialAccount--facebook" target="_blank"></a></li>
        <li><a href="http://twitter.com/intent/tweet?text=How to Implement Categories in Django - DjangoPy https://djangopy.org/how-to/how-to-implement-categories-in-django/" class="Icon socialAccount--twitter" target="_blank"></a></li>
        <li><a href=" https://plus.google.com/share?url=https://djangopy.org" class="Icon socialAccount--google" target="_blank"></a></li>
        <li><a href="mailto:djangopyz@gmail.com?&subject=DjangoPy | Learn, Code, Implement&body=How to Implement Categories in Django%0A https://djangopy.org/how-to/how-to-implement-categories-in-django/" target="_self" class="Icon socialAccount--mail" target="_blank"></a></li>
    </ul>

<br><hr><br>


<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<script type="text/javascript" src = "/js/post_detail.js"></script>

<br><hr><br>
  </div>
  </div>
</div>
</div>

<!-- Latest Posts -->
<section class="latest-posts" style="background-color: #F2F2F2;"> 
  <div class="container">
    <header> 
      <h2 style="text-align:center;">Latest from the blog</h2>
      <br>
    </header>
    <div class="row">
              
      <div class="post col-md-4">
        <div class="post-thumbnail">
          <a href="/how-to/handle-asynchronous-tasks-with-celery-and-django">
         <img class = "img-fluid" alt="" src="/img/handle-asynchronous-tasks-with-celery-and-django/cover.png" title="" srcset="/assets/resized/480/cover.png 480w,/assets/resized/800/cover.png 800w,/img/handle-asynchronous-tasks-with-celery-and-django/cover.png 1360w">

        </a>
      </div>
        <div class="post-details">
          <div class="post-meta d-flex justify-content-between">
            <div class="date">16 February 2018</div>
            <div class="category"><a href="#">how-to</a></div>
          </div><a href="/how-to/handle-asynchronous-tasks-with-celery-and-django" class = "catalogue-item" style="text-decoration: none; padding: 2px 0 8px 0;">
                    <h4>Handle Asynchronous Tasks using celery and Django</h4>
        <div class="catalogue-line" style="padding-bottom:5px;"></div>
          <p class="text-muted">In this post we will learn, how to implement celery to django application, to handle asynchronous tasks with Celery.</p>
        </div></a>
      </div>
              
      <div class="post col-md-4">
        <div class="post-thumbnail">
          <a href="/learn/set-up-authentication-system-in-django-in-just-10-minutes/">
         <img class = "img-fluid" alt="" src="/img/set-up-authentication-system-in-django-in-just-10-minutes/cover.jpg" title="" srcset="/assets/resized/480/cover.jpg 480w,/assets/resized/800/cover.jpg 800w,/img/set-up-authentication-system-in-django-in-just-10-minutes/cover.jpg 1240w">

        </a>
      </div>
        <div class="post-details">
          <div class="post-meta d-flex justify-content-between">
            <div class="date">03 October 2017</div>
            <div class="category"><a href="#">learn</a></div>
          </div><a href="/learn/set-up-authentication-system-in-django-in-just-10-minutes/" class = "catalogue-item" style="text-decoration: none; padding: 2px 0 8px 0;">
                    <h4>Set-up Authentication System in Django in just 10 minutes</h4>
        <div class="catalogue-line" style="padding-bottom:5px;"></div>
          <p class="text-muted">In this post, we will discuss Authentication System in Django. We will be discussing the most abstract way to how to implement on your Django Project in just simple steps....</p>
        </div></a>
      </div>
              
      <div class="post col-md-4">
        <div class="post-thumbnail">
          <a href="/package-of-week/categories-with-django-mptt/">
         <img class = "img-fluid" alt="" src="/img/categories-with-django-mptt/cover.jpg" title="" srcset="/assets/resized/480/cover.jpg 480w,/assets/resized/800/cover.jpg 800w,/img/categories-with-django-mptt/cover.jpg 1240w">

        </a>
      </div>
        <div class="post-details">
          <div class="post-meta d-flex justify-content-between">
            <div class="date">30 July 2017</div>
            <div class="category"><a href="#">package-of-the-week</a></div>
          </div><a href="/package-of-week/categories-with-django-mptt/" class = "catalogue-item" style="text-decoration: none; padding: 2px 0 8px 0;">
                    <h4>Categories with django-mptt</h4>
        <div class="catalogue-line" style="padding-bottom:5px;"></div>
          <p class="text-muted">In this post, we'll learn how to implement categories in Django efficiently by storing hierarchical data in place of making many database queries since database queries are costly in terms...</p>
        </div></a>
      </div>
    
    </div>
  </div>
</section>


      </div>
    </div>
    
<center>

<section class="section--subscribe">
  <div class="container">
       <h3 class="u-alignCenter">Stay in touch</h3>
       <p>
         Sign up for our newsletter to get latest updates, news and tutorials on Django. We hate spam as much you do!
       </p>
      <div class="row h-100 justify-content-center align-items-center">
 

    <div class="newsletterForm-wrapper">
      <!-- Begin MailChimp Signup Form -->
      <div id="mc_embed_signup">
        <form action="https://djangopy.us15.list-manage.com/subscribe/post?u=d360054cce6cf1e173862fa58&amp;id=4b711b168e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          <div id="mc_embed_signup_scroll">
            <div class="mc-field-group">
              <input type="email" value="" name="EMAIL" class="textInput textInput--large" id="mce-EMAIL" placeholder="Your email address" style="width:100% !important;">
            </div>
            <div id="mce-responses" class="clear">
              <div class="response" id="mce-error-response" style="display:none; color: red;"></div>
              <div class="response" id="mce-success-response" style="display:none; color: green;"></div>
            </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px;"><input type="text" name="b_d360054cce6cf1e173862fa58_4b711b168e" tabindex="-1" value=""></div>
            <div class="clear u-alignCenter"><input type="submit" value="Get new blog posts by email" name="subscribe" id="mc-embedded-subscribe" class="button-x button--primary"></div>
          </div>
        </form>
         </div>
      </div>
      <!--End mc_embed_signup-->
    </div>
    <hr/>
  </div>
</section>

</center>

<footer class="section--footer">
  <div class="container container--content">
    <ul class="socialAccountList row h-100 justify-content-center align-items-center">
      <li><a href="http://www.github.com/djangopy-org" class="socialAccount socialAccount--github" target="_blank"></a></li>
        <li><a href="http://facebook.com/djangopy-org" class="socialAccount socialAccount--facebook" target="_blank"></a></li>
        <li><a href="http://twitter.com/DjangoPy_Admin" class="socialAccount socialAccount--twitter" target="_blank"></a></li>
        <li><a href="https://www.reddit.com/user/Djangopy-org/" class="socialAccount socialAccount--reddit" target="_blank"></a></li>
        <li><a href="mailto:djangopyz@gmail.com?&amp;subject=DjangoPy | Learn, Code, Implement&amp;body=How to Implement Categories in Django%0A https://djangopy.org/how-to/how-to-implement-categories-in-django/" target="_self" class="socialAccount socialAccount--mail" target="_blank"></a></li>
    </ul>
        <div>
      Hand-crafted with <i class="fa fa-code fa-lg"></i> + <i class="fa fa-heart fa-lg"></i> + <i class="fa fa-coffee fa-lg"></i>
    </div>
    <div>
      © 2018 All Rights Reserved
    </div>
    <center><a href = "/terms-of-services" target = "_self">Term of Service</a> | <a href="/privacy-policy" target="_self">Privacy Policy</a> | <a href = "/disclaimer" target = "_self">Disclaimer </a> | <a href = "/sitemap.xml" target="_self">Sitemap</a></center>
  </div>
</footer>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>

  </body>

</html>


